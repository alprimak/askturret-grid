# Railway config for grid-landing service
# Builds both landing page and demo app

[build]
builder = "nixpacks"
buildCommand = """
cd landing && npm install && npm run build && \
cd ../demo && npm install && npm run build && \
cp -r dist ../landing/dist/demo
"""
watchPatterns = ["landing/**", "demo/**", "src/**"]

[deploy]
startCommand = "cd landing && node_modules/.bin/serve dist -s -l $PORT"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
